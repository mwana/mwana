<VirtualHost 10.3.1.10:443>

    ServerAdmin webmaster@localhost
    ServerName mwana-staging
    ServerAlias mwana.prod

    DocumentRoot /home/mwana/staging-environment/code_root/mwana/public/

    Alias  /robots.txt /home/mwana/staging-environment/code_root/mwana/public/robots.txt
    Alias /favicon.ico /home/mwana/staging-environment/code_root/mwana/public/favicon.ico
    Alias /media/ /home/mwana/staging-environment/code_root/mwana/public/media/
    Alias /static/ /home/mwana/staging-environment/code_root/mwana/public/static/

    <Directory /home/mwana/staging-environment/code_root/mwana/public/>
    Order allow,deny
    Allow from all
    </Directory>

    WSGIDaemonProcess mwana-staging processes=2 threads=15 display-name=%{GROUP}
    WSGIProcessGroup mwana-staging

    WSGIScriptAlias / /home/mwana/staging-environment/code_root/mwana/malawi/apache/project.wsgi

    <Directory /home/mwana/staging-environment/code_root/mwana/malawi/apache/>
    Order allow,deny
    Allow from all
    </Directory>

    # Django admin media
    <Directory "/home/mwana/staging-environment/python_env/lib/python2.7/site-packages/django/contrib/admin/media">
      Options Indexes FollowSymLinks MultiViews
      AllowOverride All
      Order allow,deny
      allow from all
    </Directory>
    Alias /admin-media /home/mwana/staging-environment/python_env/lib/python2.7/site-packages/django/contrib/admin/media
    
    <Location "/admin-media">
      SetHandler None
    </Location>
    
    ErrorLog /var/log/apache2/mwana.staging.error.log
    LogLevel warn
    CustomLog /var/log/apache2/mwana.staging.access.log combined

    SSLEngine on
    SSLCertificateFile /etc/apache2/ssl/apache.crt
    SSLCertificateKeyFile /etc/apache2/ssl/apache.key

</VirtualHost>